# TASK::TASK_HELI_MISSION

## Summary
Gives the heli a mission

## Parameters
* **PED_INDEX** ped: _INDEX TargetPedIndex (If a target ped needs to be specified it is done here) FLOAT TargetX, TargetY, TargetZ (specify targetcoordinates here in needed.)
* **VEHICLE_INDEX** heli:
Orientation (orientation heli tries to be in.
(0-360) Use -1 if not bothered.
-1 Should be used in 99% of the times)
* **VEHICLE_INDEX** targetVehicle: Index (If a target vehicle needs to be specified it is done here)
* **PED_INDEX** targetPed
* **FLOAT** coorsX
* **FLOAT** coorsY
* **FLOAT** coorsZ
* **VEHICLE_MISSION** mission
* **FLOAT** cruiseSpeed: (in m/s)
* **FLOAT** targetReachedDist: (distance (in meters) at which heli thinks it's arrived.) ALSO used as the hover distance for MISSION_ATTACK and MISSION_CIRCLE
* **FLOAT** heliOrientation
* **INT** flightHeight:
(z coordinate the heli tries to maintain.
ie 30 == 30 meters above sea level)
* **INT** minHeightAboveTerrain:
(height in meters that the heli will try to stay above terrain.
ie 20 == always tries to stay at least 20 meters above ground.) FLOAT fSlowDownDistance.
 setting to -1 means use default tuning(100).
 in general get more control with big number and more dynamic with smaller #
* **FLOAT** slowDownDistance = -1
* **HELIMODE** heliFlags = 0

## Notes
<!-- AUTOGENERATED: Remove this line before editing -->
Must have targetVehicle, targetPed, OR destination X/Y/Z set
Will follow targeted vehicle/ped, or fly to destination
Set whichever is not being used to 0


Mission mode type:
 - 4, 7: Forces heli to snap to the heading if set, flies to destination or tracks specified entity (mode 4 only works for coordinates, 7 works for coordinates OR ped/vehicle)
 - 6: Attacks the target ped/vehicle with mounted weapons. If radius is set, will maintain that distance from target.
 - 8: Makes the heli flee from the ped/vehicle/coordinate
 - 9: Circles around target ped/vehicle, snaps to angle if set. Behavior flag (last parameter) of 2048 switches from counter-clockwise to clockwise circling. Does not work with coordinate destination.
 - 10, 11: Follows ped/vehicle target and imitates target heading. Only works with ped/vehicle target, not coord target
 - 19: Heli lands at specified coordinate, ignores heading (lands facing whatever direction it is facing when the task is started)
 - 20: Makes the heli land when near target ped. It won't resume chasing.
 - 21: Emulates a helicopter crash
 - 23: makes the heli circle erratically around ped


Heli will fly at maxSpeed (up to actual maximum speed defined by the model's handling config)
You can use SET_DRIVE_TASK_CRUISE_SPEED to modulate the speed based on distance to the target without having to re-invoke the task native. Setting to 8.0 when close to the destination results in a much smoother approach.

If minHeight and maxHeight are set, heli will fly between those specified elevations, relative to ground level and any obstructions/buildings below. You can specify -1 for either if you only want to specify one. Usually it is easiest to leave maxHeight at -1, and specify a reasonable minHeight to ensure clearance over any obstacles. Note this MUST be passed as an INT, not a FLOAT.

Radius affects how closely the heli will follow tracked ped/vehicle, and when circling (mission type 9) sets the radius (in meters) that it will circle the target from

Heading is -1.0 for default behavior, which will point the nose of the helicopter towards the destination. Set a heading and the heli will lock to that direction when near its destination/target, but may still turn towards the destination when flying at higher speed from a further distance.

Behavior Flags is a bitwise value that modifies the AI behavior. Not clear what all flags do, but here are some guesses/notes:
   1: Forces heading to face E
   2: Unknown
   4: Tight circles around coordinate destination
   8: Unknown
  16: Circles around coordinate destination facing towards destination
  32: Flys to normally, then lands at coordinate destination and stays on the ground (using mission type 4)
  64: Ignores obstacles when flying, will follow at specified minHeight above ground level but will not avoid buildings, vehicles, etc.
 128: Unknown
 256: Unknown
 512: Unknown
1024: Unknown
2048: Reverses direction of circling (mission type 9) to clockwise
4096: Hugs closer to the ground, maintains minHeight from ground generally, but barely clears buildings and dips down more between buildings instead of taking a more efficient/safe route
8192: Unknown

Unk3 is a float value, you may see -1082130432 for this value in decompiled native scripts, this is the equivalent to -1.0f. Seems to affect acceleration/aggressiveness, but not sure exactly how it works. Higher value seems to result in lower acceleration/less aggressive flying. Almost always -1.0 in native scripts, occasionally 20.0 or 50.0. Setting to 400.0 seems to work well for making the pilot not overshoot the destination when using coordinate destination.

Notes updated by PNWParksFan, May 2021

## Hashes
<!-- AUTOGENERATED: Do not change -->
|Version|Hash              |
|-------|------------------|
|2824   |0xDAC27BA46D21818F|
|2802   |0xDCE9DC9AFF5AA02D|
|2699   |0x545C59578966D5B8|
|2612   |0x545C59578966D5B8|
|2545   |0x545C59578966D5B8|
|2372   |0x040CCF00053DBCB0|
|2189   |0x978007212AAC392F|
|2060   |0x9AFA0796FDCABCD5|
|1868   |0x2042881C1FE6D05A|
|1737   |0x9DB29D916EF1BFB2|
|1604   |0x3DF8D785133D0B17|
|1493   |0x143DD8A84CAA784C|
|1365   |0x8F7859DFA5ECF628|
|1290   |0x02B347FEAD1B51DB|
|1180   |0x3A7639BDA0C847F6|
|1103   |0x9CD13E23F5D54507|
|1011   |0xEBB24586B2E08B0B|
|944    |0x03B9FE5FECB7D9B3|
|877    |0xDEB658873B50218A|
|791    |0xF3BA65D58D2A71D0|
|757    |0xC2804AD13A70DAC1|
|678    |0x53ADC9115BDB0CDD|
|617    |0x0A5F0471674CF679|
|573    |0x2E01C97C73197689|
|505    |0x927A38D2A216C253|
|463    |0x066323C78EF48DEE|
|393    |0x506BA578F626AA49|
|372    |0xCD4CEE63F3F75025|
|350    |0x59DFC08A31F08D05|
|323    |0xDAD029E187A2BEB4|
|joaat  |0x0C143E97        |